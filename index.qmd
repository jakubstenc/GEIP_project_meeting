---
format: 
  revealjs:
    embed-resources: false 
    aspectratio: 43
    navigation: horizontal
    print-background: true
    partial-slides: true
    multiplex: false
    slide-number: c/t
    incremental: false
    theme: techroom/pp.scss
    logo: images/pyl.png
    footer: "Jakub Štenc, Charles University, Czech Republic + CREAF, Spain"
    background-transition: fade
    transition: none
    center-title-slide: false
    self_contained: true
bibliography: techroom/references.bib
---

#  {background-image="images/90985051_3160362750661404_9121786830419656704_o.jpg" style="text-align: center;"}

<head>

<body>

<h2 style="text-align:center;font-size: 40px;color:white;">

::: {style="background-color: rgba(0, 0, 0, .5); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;"}
Pollen deposition on *Succisa pratensis* in a dynamic plant-pollinator network

Jakub Štenc and company
:::

</h2>

<h2 style="color:white;font-size: 30px;font-family: tahoma;text-align:center;">

::: {.absolute top="55%" left="65%"}
:::

</h2>

![](images/CREAF-SO-logo-pluma_blanca-ESP.png){.absolute bottom="0%" left="0" width="250"}

![](images/logoPrF1.png){.absolute bottom="8%" left="0%" width="184"} ![](images/pyl.png){.absolute bottom="8%" right="0%" width="184"}

</body>

</html>

##  {background-video="images/video_intro_reduced_shorter.mp4" background-video-loop="true" background-video-muted="true"}

```{css}
/*| echo: false */
figcaption {
  margin: 2px;
  line-height:1px;
  text-align: center;
}
```

::: {top="70" height="400"}
```{r setup}
#| include: false
#-------------READ ME-----------####

   # This script serves to the first exploration and pre-analyses of the data from Handrkov 2011-2024
   # Log of possible problems, changes and comments etrc. can be found here: https://docs.google.com/document/d/1iAdDP0WE-Z7KCjPCh7StA5mAd4BrJD0UY1tZUGOXFSA/edit?tab=t.0


#-------------READ ME - fin -----------#

# Packages #####
library(devtools)
library(bipartite)
library("OpenImageR")
library("jpeg")
library(magick)
library(igraph)
library (iNEXT)
library("dplyr") 
library(tidyr)

## HanPolNet package ####

# Now, re-install the fresh, complete version from GitHub
#remove.packages("HanPolNet") # may be handy for updating the package

# It's a good idea to restart your R session now (Session > Restart R)

# Now, re-install the fresh, complete version from GitHub
#devtools::install_github("Pollination-Ecology-Group/HanPolNet",force = TRUE)

# It should now load correctly
library("HanPolNet")
#--------------#

# Colour definitions  ####
seda <- rgb(150,150,150, max = 255, alpha = 60, names = "blue")
modra <- rgb(104, 99, 219, max = 255, alpha = 80, names = "blue") #rgb(99, 155, 202)
zelena <- rgb(0, 158, 115, max = 255)
cervena <- rgb(220, 40, 100, max = 255)

#--------------#



# Data import ####
jine_ctverce_spojene_11_24 <- read.csv("data/jine_ctverce_spojene_11_24.csv")
net1124_edited<- jine_ctverce_spojene_11_24
#--------------#

# Unification of identificator ####
# This identificator is to identify one visit of the plot - thus it combines year, plot, month, day, hour, minute
net1124_edited$id_i<-as.character(net1124_edited$id_i)
net1124_edited$id_i<-with(net1124_edited,paste(rok,osnova,mesic*100+den,hod*100+min,sep="-"))
unique(net1124_edited$id_i)
#--------------#


net1124_edited$rok <- factor(net1124_edited$rok, levels = c("11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24"))

# Standardization by sampling effort ####

## Data preparation before standardization for sampling effort ####
net1124_edited <-  net1124_edited[which(!net1124_edited$beh%in%c("Kratiny12_beh14","Kratiny12_beh12","Kratiny12_beh13","Kratiny12_beh11","Handrkov12_beh11", "Handrkov12_beh12", "Handrkov12_beh13")), ] # only Handrkov

## Standardization computation ####
# Standartization is computed by taking all the individual visits to the plot (coded by id_i) and the number of visits to the plot per year is obtained in following code

poc.obejiti <-  net1124_edited %>% group_by(id_i, rok, osnova) %>% summarize(count=n()) 
poc.obejiti$obejito <- 1    

obejiti <-  tapply(poc.obejiti$obejito, list(poc.obejiti$osnova, poc.obejiti$rok),sum, na.rm=T) 


obejiti2 <- obejiti 
obejiti2 <- data.frame(obejiti2[!rownames(obejiti2)%in%c(30, 31, 42,43,97),])
colnames(obejiti2) <- c(11:24)
obejiti2$osnova <- rownames(obejiti2) 
obejiti3 <- obejiti2 %>% pivot_longer(cols=c(colnames(obejiti2)[-15]),
                                      names_to=c('rok'),
                                      values_to='obejito')

### plot sampling effort #####
#pdf("Sampling_effort.pdf")
par(mfrow=c(1,1))
plot(tapply(obejiti3$obejito, list( obejiti3$rok), mean, na.rm=T), type="n", main="Sampling effort per year", ylab = "Average number of censuses per plot", xlab="Year",  col=rgb(0,0,0,0.25), axes = F, cex.lab=1.5, ylim= c(0,50))

lines(tapply(obejiti3$obejito, list( obejiti3$rok), mean, na.rm=T), lwd = 2)

axis(1, at=c(1:14), labels = c(2011:2024))
axis(2)
mean_plots <-tapply(obejiti3$obejito, list( obejiti3$rok), mean, na.rm=T)

sd_plots <-tapply(obejiti3$obejito, list( obejiti3$rok), sd, na.rm=T)

# Vertical arrow
arrows(x0=c(1:14), y0=mean_plots-sd_plots, x1=c(1:14), y1=mean_plots+sd_plots, code=3, angle=90, length=0.1, col="black", lwd=2)

#dev.off()
#--------------#


## Merge sampling effort with original table #####
net1124_edited <- merge( jine_ctverce_spojene_11_24,obejiti3, by = c("osnova", "rok"), all = TRUE)  # Use all=TRUE for a full outer join


# Data preparation #####
## data cleaning ####
net1124_edited <-  net1124_edited[which(!net1124_edited$osnova%in%c("L0","L1","L10","L11","L12","L2","L3","L4","L5","L6","L7","L8","L9")), ] # only plots in the meadow
net1124_edited <-  net1124_edited[!net1124_edited$druhK_opraveno%in%c("UNDETERMINED_trifolium","Epilobium_sp","Kanutia_arvensis","Leontodon_sp","nic","Hypericum_perforatum","Lycopus_europaeus","Galium_boreale","Galium_glaucum"), ] # only plots in the meadow
net1124_edited <-  net1124_edited[which(net1124_edited$opyluje%in%c("T","?" )), ] # only pollinators

## Plant corrections ####
net1124_edited[net1124_edited$druhK_opraveno%in% c("Cuscuta_sp") ,]$druhK_opraveno <- "Cuscuta_europaea"
net1124_edited[net1124_edited$druhK_opraveno%in% c("Myosotis_sp") ,]$druhK_opraveno <- "Myosotis_palustris"
net1124_edited[net1124_edited$druhK_opraveno%in% c("Stellaria_sp") ,]$druhK_opraveno <- "Stellaria_graminea"
net1124_edited[net1124_edited$druhK_opraveno%in% c("Lysimachia_sp") ,]$druhK_opraveno <- "Lysimachia_vulgaris"

net1124_edited <- droplevels(net1124_edited)


## new variable - number of observations corrected by smapling eefort per plot within a year
net1124_edited$corrected_number <- net1124_edited$pocet.x/net1124_edited$obejito

#--------------#

# General network data ####

net1124  <-   apply( tapply(net1124_edited$pocet.x, list(net1124_edited$rok, net1124_edited$osnova), sum)/tapply(net1124_edited$obejito, list(net1124_edited$rok, net1124_edited$osnova), unique), 1, sum, na.rm=T)


net1124 <- tapply(net1124_edited$corrected_number, list(net1124_edited$druhK_opraveno, net1124_edited$sitodruh), sum)

net1124[is.na(net1124)] <- 0

#--------------#


## Datasets per individual years ####

for (i in unique(net1124_edited$rok)) {
  
  # Create the data matrix for the current value of i
  net <- with(net1124_edited[net1124_edited$rok %in% c(i),], 
              tapply(corrected_number, list(druhK_opraveno, sitodruh), sum))
  net[is.na(net)] <- 0
  
  # Dynamically assign the matrix to a variable named "net<i>"
  assign(paste("net", i, sep = ""), net)
}

nets <- paste("net", unique(net1124_edited$rok), sep = "")


## Datasets per hour ####

for (i in unique(net1124_edited$hod)) {
  
  # Create the data matrix for the current value of i
  net <- with(net1124_edited[net1124_edited$hod %in% c(i)&net1124_edited$rok=="21",], 
              tapply(corrected_number, list(druhK_opraveno, sitodruh), sum))
  net[is.na(net)] <- 0
  
  # Dynamically assign the matrix to a variable named "net<i>"
  assign(paste("net_hod_", i, sep = ""), net)
}

nets <- paste("net_hod_", unique(net1124_edited$hod), sep = "")



```
:::

::: {.absolute top="75%" left="55%"}
:::

## Introduction - visitation

![](images/pestrenky_round.png){fig-align="center" width="600"}

## Introduction - pollen transfer

![](images/E.interuptus_round.png){fig-align="center" width="600"}

## Introduction - deposition

![](images/stigma.png){fig-align="center" width="600"}

## Introduction - deposition

::::: r-stack
::: fragment
![](images/Blizna_Suc_pra_2_round.png){fig-align="center" width="600"}
:::

::: fragment
![](images/Blizna_Suc_pra_3.png){fig-align="center" width="600"}
:::
:::::

## Introduction

:::::::: r-stack
::: fragment
![](images/unnamed-chunk-4-1.png){fig-align="center" width="620" top="-20"}
:::

::: fragment
![](images/pestrenky_round.png){fig-align="center" width="500" top="-20"}
:::

::: fragment
![](images/Blizna_Suc_pra_2_round.png){fig-align="center" width="520" top="-20"}
:::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
Does pollinator sharing translate to pollen deposition?
:::

</h2>
::::
::::::::

## Methods - the locality

::::: {layout-ncol="2"}
::: fragment
![[Czech Republic]{style="font-size: 32px;"}](images/Picture9.png){width="400"}
:::

::: fragment
![[Rich in flowers]{style="font-size: 32px;"}](images/banner.jpg){width="800"}
:::
:::::

::: {.absolute .fragment bottom="80" right="380"}
-   15 years of data collection (2011-2025)
:::

## Methods - permanent plots

---
fig-cap-location: top
---

```{=html}
<style>
 #slide1 .quarto-title-caption {
  font-size: 22px;
  }
</style>
```

<div>

:::::: {layout="[0.3,  0.3, 0.3]"}
::: {.fragment top="100" height="200"}
![[plots are marked]{style="font-size: 32px;"}](images/Picture3.jpg){width="300"}
:::

::: {.fragment top="100" height="200"}
![[recovered every year]{style="font-size: 32px;"}](images/Picture2.jpg){width="300"}
:::

::: {#sec-column .fragment top="100" height="700"}
![[93 plots in total]{style="font-size: 32px;"}](images/han_map_1.png)
:::
::::::

</div>

## Methods - plant-pollinator survey

<div>

::::: {layout="[0.5, 0.5]"}
::: {.fragment top="70" height="400"}
![[Plant survey]{style="font-size: 32px;"}](images/Picture1.jpg)
:::

::: {.fragment top="70" height="400"}
![[Pollinator survey]{style="font-size: 32px;"}](images/Picture5.jpg)
:::
:::::

</div>

## Methods - plant survey

<div>

:::: {layout="[0.5, 0.5]"}
::: {.fragment top="70" height="400"}
![](images/Picture1.jpg)
:::

<!-- empty column to create gap -->
::::

</div>

::: {.absolute .fragment top="10%" left="55%"}
-   4 x 4 meter squares
-   divided to 64 0.5 x 0.5 subplots
-   Stalks of flowering plants are counted or scored presence/absence in subplots
-   2 times per sampling period
:::

## Methods - pollinator survey

<div>

::::: {layout="[0.5, 0.5]"}
::: {.fragment top="70" height="400"}
![](images/Picture5.jpg)
:::

<div>

<!-- empty column to create gap -->

</div>
:::::

</div>

::: {.absolute .fragment top="10%" left="55%"}
-   "Snapshot" of plant-pollinator interaction
-   = all interactions recorded, every flower unit observed once per sampling
-   20+ sampling per plot per year
-   97 629+ interactions recorded
:::

## Methods - plant-pollinator survey

![](images/DJI_0010.JPG)

## Methods - plant-pollinator survey

![](images/DJI_0058.JPG)

## Methods - plant-pollinator survey

![](images/DJI_0070.JPG)

## Methods - plant-pollinator survey

![](images/DJI_0092.JPG)

## Pollinator sharing - interannual scale

:::::::: r-stack
::: {.fragment top="90" height="400"}
![](images/annual_variation.png){fig-align="center" fig-pos="b"}
:::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
Does the structure of pollinator sharing vary between years?
:::

</h2>
::::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
Are hub species stable across years?
:::

</h2>
::::
::::::::

## Pollinator sharing - diurnal scale

::::::::::::: r-stack
:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
We know something from our previous work.
:::

</h2>
::::

::: fragment
![](images/diurnal_variation.png){fig-align="center" width="800"}
:::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
The network structure varies also within a day!
:::

</h2>
::::

::: fragment
![](images/clipboard-1788526568.png){fig-align="center" width="800"}
:::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
And it affects pollen transfer.
:::

</h2>
::::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
Does it affect the structure of plant sharing too?
:::

</h2>
::::
:::::::::::::

## Pollinator preferences

:::::::::::::::::: r-stack
::: fragment
![](images/DJI_0009.JPG){fig-align="center"}
:::

::: fragment
![](images/vidle.png){fig-align="center"}
:::

::: fragment
![](images/Pasted%20image.png){fig-align="center"}
:::

::: fragment
![](images/DJI_0009.JPG){fig-align="center"}
:::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
Because space matters!
:::

</h2>
::::

::: fragment
![](images/Pasted%20image%20(2).png){fig-align="center"}
:::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
Comparing predicted visitations and observed visitations.
:::

</h2>
::::

::: fragment
![](images/Pasted%20image%20(3).png){fig-align="center"}
:::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
And then to understand the effect of space and time on the compossition of pollinators visiting plants.
:::

</h2>
::::

::: fragment
![](images/Pasted%20image%20(4).png){fig-align="center"}
:::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
And ultimately to understand what determines the plant-pollinator interactions.
:::

</h2>
::::
::::::::::::::::::

## Heteropecific pollen deposition

::::::::: r-stack
::: fragment
![](images/unnamed-chunk-4-1.png){fig-align="center" width="620" top="-20"}
:::

::: fragment
![](images/Blizna_Suc_pra_2_round.png){fig-align="center" width="500" top="-20"}
:::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
Whole network level!
:::

</h2>
::::

:::: fragment
<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(0, 0, 0, .8); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;;text-align:center;"}
Using pollen metabarcoding and image recognition.
:::

</h2>
::::
:::::::::

## And more...

## What now?

<div>

:::: {layout="[0.95, 0.05]"}
<div>

<!-- empty column to create gap -->

</div>
::::

</div>

-   ![](images/cleaning.png){width="40"} to clean the data and prepare the data sets for analysis (in progress)

-   ![](images/clipboard-3558150951.png){width="40"} make a package for repeated analyses

-   ![](images/clipboard-229370691.png){width="40"} analyse the stability of pollinator sharing

-   ![](images/ideas.png){width="40"} write down the first MS - after Christmas?

## HanPolNet package ![](images/clipboard-3558150951.png){width="40"}

::::: {layout="[[0.5], [0.5]]"}
::: {.fragment top="70" height="400"}
-   One package to rule all the data - including supportive data

-   Fully available at Github [![](images/clipboard-4080856661.png){width="40"}](#0)
:::

::: {.fragment top="70" height="400"}
![](images/Pasted%20image%20(7).png)
:::
:::::

## Conclusion

-   I want to understand how plants and pollinators co-exist together

-   And mainly how that affects pollen transfer

-   I have a lot work to do, but I want to help with everything I can

#  {background-image="images/Fin.jpg" style="text-align: center;"}

<head>

<body>

<h2 style="text-align:center;color:white;">

::: {style="background-color: rgba(255, 255, 255, .4); backdrop-filter: blur(5px); box-shadow: 0 0 1rem 0 rgba(0, 0, 0, .5); border-radius: 5px;"}
Thank you for your attention!
:::

</h2>

```{css}
.frosted {
  background-color: rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px); /* For Safari compatibility */
  padding: 10px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
  width: fit-content;
  margin-left: auto;
  margin-right: auto;}
```

::: frosted
<h2 style="color:white;font-size: 30px;font-family: tahoma;text-align:center;">

Contact me!

jakubstenc\@gmail.com

+420 774 553 734

</h2>
:::

::: {.absolute top="55%" left="65%"}
:::

![](images/Logo%20EN%20BWlogo.png){.absolute bottom="60%" left="10" width="200"}

![](images/CREAF-SO-logo-pluma_blanca-ESP.png){.absolute bottom="0%" left="0" width="250"}

![](images/logoPrF1.png){.absolute bottom="8%" left="0%" width="184"} ![](images/pyl.png){.absolute bottom="8%" right="5%" width="184"}

</body>

</html>
